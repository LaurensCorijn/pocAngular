<div>
  <mat-card>
    <form [formGroup]="user" (ngSubmit)="onSubmit()">
      <mat-card-header>
        <mat-card-title>Register</mat-card-title>
      </mat-card-header>
      <mat-card-content>
          <span>
            <mat-form-field>
              <input
                matInput
                placeholder="user name"
                aria-label="user name"
                formControlName="gebruikersnaam"
              />
              <mat-error
                *ngIf="
                user.get('username')?.errors &&
                user.get('username')?.touched"
              >
                {{ getErrorMessage(user.get('username')?.errors) }}
              </mat-error>
            </mat-form-field>
          </span>
        <mat-form-field>
          <input
            matInput
            placeholder="email"
            aria-label="email"
            formControlName="email"
          />
          <mat-error
            *ngIf="user.get('email')?.errors && user.get('email')?.touched"
          >
            {{ getErrorMessage(user.get('email')?.errors) }}
          </mat-error>
        </mat-form-field>
        <span formGroupName="passwordGroup">
            <mat-form-field>
              <input
                type="password"
                matInput
                placeholder="password"
                aria-label="password"
                formControlName="password"
              />
              <mat-error
                *ngIf="
                  user.get('passwordGroup')?.get('password')?.errors &&
                  user.get('passwordGroup')?.get('password')?.touched
                "
              >
                {{
                getErrorMessage(
                  user.get('passwordGroup')?.get('password')?.errors
                )
                }}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input
                type="password"
                matInput
                placeholder="confirm password"
                aria-label="confirm password"
                formControlName="confirmPassword"
              />
              <mat-error
                *ngIf="
                  user.get('passwordGroup')?.get('confirmPassword')?.errors &&
                  user.get('passwordGroup')?.get('confirmPassword')?.touched
                "
              >
                {{
                getErrorMessage(
                  user.get('passwordGroup')?.get('confirmPassword')?.errors
                )
                }}
              </mat-error>
            </mat-form-field>
            <mat-error
              *ngIf="
                user != undefined &&
                user.get('passwordGroup')?.errors !== null &&
                user.get('passwordGroup')?.get('confirmPassword') != null &&
                user.get('passwordGroup')?.get('password') != null &&
                user.get('passwordGroup')?.get('confirmPassword')?.touched &&
                user.get('passwordGroup')?.get('password')?.touched
              "
            >
              {{ getErrorMessage(user.get('passwordGroup')?.errors) }}
            </mat-error>
          </span>
      </mat-card-content>
      <mat-card-actions>
        <a [routerLink]="['/login']">login</a>
        <button
          mat-raised-button
          type="submit"
          color="primary"
        >
         Register
        </button>
      </mat-card-actions>
    </form>
    <mat-card class="error" *ngIf="errorMessage">
      got an error while trying to register: {{errorMessage}}
    </mat-card>
  </mat-card>
</div>
